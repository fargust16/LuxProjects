<!DOCTYPE html>
<html>
<head>
	<title>Online Library</title><meta content="width=device-width,maximum-scale=1.0,initial-scale=1.0,minimum-scale=1.0,user-scalable=yes" name="viewport">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="./css/style.css">
</head>
<body>
	<header class="header-nav home-page__header-nav">
		<a href="index.html" class="header-nav__logo"><h1>Online Library</h1></a>
		<i class="fa fa-bars header-nav__menu-btn" aria-hidden="true" onclick="displayMenu(true)"></i>
		<nav id="menu" class="menu menu_close">
			<i class="fa fa-times menu__close-btn" aria-hidden="true" onclick="displayMenu(false)"></i>
			<div class="menu__profile"><a class="menu__profile-link" href="#Sign In">Sign In</a></div>
			<ul class="menu__options">
				<li class="menu__option"><a class="menu__option-link" href="./index.html">Home</a></li>
				<li class="menu__option"><a class="menu__option-link" href="./add-book.html">Add a new book</a></li>
				<li class="menu__option"><a class="menu__option-link" href="./recent.html">Recent</a></li>
				<li class="menu__option"><a class="menu__option-link" href="./settings.html">Settings</a></li>
				<li class="menu__option"><a class="menu__option-link" href="./support.html">Support</a></li>
			</ul>
		</nav>
	</header>
	<article class="other-pages">
		<main class="add-book other-pages__block">
			<div class="main-header"><span class="main-header__text">Add a new book</span></div>
			<form id="book-data" action="" method="POST" class="options add-book__options">
				<section class="option">
					<div class="header_lines option__header open-header"><span class="header__text">main data</span></div>
					<div class="option__content">
						<input type="text" name="title" placeholder="title" class="field option__field" required>
						<input type="text" name="author" placeholder="author" class="field option__field" required>
						<label for="book_source" class="field option__field add-book__source">
							<mark class="add-book__source-title" id="source_title">Файл не выбран</mark>
							<input type="file" id="book_source" name="source" class="add-book__source-field" onchange="chooseBookSource()">
						</label>
						<textarea class="field add-book__description" placeholder="description" rows="4"></textarea>
						<label for="publish-date" class="add-book__date-header">Publishing <input type="date" name="publish-date" class="field add-book__date-field" id="publish-date"></label>
					</div>
				</section>
				<section class="option add-book__option">
					<div onclick="showExternalOptions(this)" class="option__header header close-header"><span class="header__text">external options</span></div>
					<div class="option__content add-book__external-options">
						<input type="text" name="genre" placeholder="genre" class="field option__genre">
						<input type="text" name="topics" placeholder="topics" class="field option__topics">
						<input type="text" name="cover-image" placeholder="cover-image" class="field option__cover-image">
					</div>
				</section>
				<div class="field captcha add-book__captcha">
					<input type="checkbox" id="isRobot" name="isRobot" class="captcha__quest">
					<label for="isRobot" class="captcha__text">I`m not a robot?</label>
				</div>
				<button type="submit" class="button add-book__upload-btn">Upload book</button>
			</form>
		</main>
	</article>
	<script type="text/javascript">
		var showExternalOptions = (e) => {
			if(getComputedStyle(e.nextElementSibling).display == 'none') {
				e.nextElementSibling.style.display = 'block';
				e.className = 'option__header header_lines open-header';
			} else {
				e.nextElementSibling.style.display = 'none';
				e.className = 'option__header header close-header';
			}
		}

		var chooseBookSource = () => {
			var file_api = ( window.File && window.FileReader && window.FileList && window.Blob ) ? true : false;
			var inp = book_source;
			var lbl = source_title;
			var file_name;

	        if( file_api && inp.files[0] ) {
	            file_name = inp.files[0].name;
	        }
	        else {
	            file_name = inp.value.replace("C:\\fakepath\\", '');
	        }

	        if( !file_name.length ) {
	        	lbl.innerText = 'Файл не выбран';
	            return;
	        }
	        else {
	        	lbl.innerText = file_name;
	        }
		}
		
		var displayMenu = (show) => {
			if(show) menu.className = "menu menu_open";
			else menu.className = "menu menu_close";
		}
	</script>
</body>
</html>