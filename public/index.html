<!DOCTYPE html>
<html>
<head>
	<title>Online Library</title>
	<meta content="width=device-width,maximum-scale=1.0,initial-scale=1.0,minimum-scale=1.0,user-scalable=yes" name="viewport">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="./css/reset.css">
	<link rel="stylesheet" type="text/css" href="./css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="./css/style.css">
	<link rel="stylesheet" type="text/css" href="./css/category.css">
	<link rel="stylesheet" type="text/css" href="./css/home-page.css">
	<link rel="stylesheet" type="text/css" href="./css/books-switcher.css">
	<script type="text/javascript" src="./modernizr-custom.js"></script>
</head>
<body>
	<header class="header-nav home-page__header-nav">
		<a href="index.html" class="header-nav__logo"><h1>Online Library</h1></a>
		<i class="fa fa-bars header-nav__menu-btn" aria-hidden="true" onclick="displayMenu(true)"></i>
		<nav id="menu" class="menu menu-close">
			<i class="fa fa-times menu__close-btn" aria-hidden="true" onclick="displayMenu(false)"></i>
			<div class="menu__profile"><a class="menu__profile-link" href="#Sign In">Sign In</a></div>
			<ul class="menu__options">
				<li class="menu__option"><a class="menu__option-link" href="./index.html">Home</a></li>
				<li class="menu__option"><a class="menu__option-link" href="./add-book.html">Add a new book</a></li>
				<li class="menu__option"><a class="menu__option-link" href="./recent.html">Recent</a></li>
				<li class="menu__option"><a class="menu__option-link" href="./settings.html">Settings</a></li>
				<li class="menu__option"><a class="menu__option-link" href="./support.html">Support</a></li>
			</ul>
		</nav>
	</header>
	<section class="search home-page__search">
		<div class="search__box-shadow">
			<label for="search-field" class="search__field-ico"><input id="search-field" type="text" class="search__field" name="search" placeholder="Find a solution" /></label>
			<label for="search-options" class="search__options-ico">
				<select id="search-options" class="search__options">
					<option class="search__option" value="all">All</option>
					<option class="search__option" value="title">Title</option>
					<option class="search__option" value="author">Author</option>
					<option class="search__option" value="ISBN">ISBN</option>
				</select>
			</label>
		</div>
	</section>
	<article class="home-page">
		<main class="main home-page__main">
			<section class="category main__category">
				<div class="header_lines category__name"><span class="header__text">Recommended books</span></div>
				<div class="books home-page__books">
					<div id="carousel" class="books-switcher find-switcher">
						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>
					</div>
					<div class="books-switcher__dots"></div>
					<a class="books-switcher__see-more" href="./category.html">see more</a>
				</div>
			</section>

			<section class="category main__category">
				<div class="header_lines category__name"><span class="header__text">Recommended books</span></div>
				<div class="books home-page__books">
					<div id="carousel" class="books-switcher find-switcher">
						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>
					</div>
					<div class="books-switcher__dots"></div>
					<a class="books-switcher__see-more" href="./category.html">see more</a>
				</div>
			</section>

			<section class="category main__category">
				<div class="header_lines category__name"><span class="header__text">Recommended books</span></div>
				<div class="books home-page__books">
					<div id="carousel" class="books-switcher find-switcher">
						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>
					</div>
					<div class="books-switcher__dots"></div>
					<a class="books-switcher__see-more" href="./category.html">see more</a>
				</div>
			</section>

			<section class="category main__category">
				<div class="header_lines category__name"><span class="header__text">Recommended books</span></div>
				<div class="books home-page__books">
					<div id="carousel" class="books-switcher find-switcher">
						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>
					</div>
					<div class="books-switcher__dots"></div>
					<a class="books-switcher__see-more" href="./category.html">see more</a>
				</div>
			</section>

			<section class="category main__category">
				<div class="header_lines category__name"><span class="header__text">Recommended books</span></div>
				<div class="books home-page__books">
					<div id="carousel" class="books-switcher find-switcher">
						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>

						<div class="book books-switcher__book">
							<img src="./images/books-cover.png" class="book__cover" alt="Book name"/>
							<div class="book__info">
								<a href="./book_description.html" class="book__title">The Alchemist</a>
								<p class="book__author">Paulo Coelho</p>
								<p class="book__desc">You are protected, in short, by your ability to love! The only protection that can possibly work against the lure of power like Voldemort's! In spite of all the temptation you have endured, all the suffering, you remain pure of heart, just as pure as you were at the age of eleven, when you stared into a mirror that reflected your heart's desire, and it showed you only the way to thwart Lord Voldemort, and not immortality or riches.</p>
								<p class="reviews book__reviews">16 reviews</p>
							</div>
						</div>
					</div>
					<div class="books-switcher__dots"></div>
					<a class="books-switcher__see-more" href="./category.html">see more</a>
				</div>
			</section>

		</main>
	</article>
	
	<script type="text/javascript">
		var touchStartPoint = 0,
			currentTransform = 0,
			switcherStartTransform = [];

		window.onload = () => {
			let switchersArr = document.getElementsByClassName('find-switcher') || [], // every block which contain books
				booksArr = [],
				dotsBlock = document.getElementsByClassName('books-switcher__dots') || [];

			for (let i = switchersArr.length - 1; i >= 0; i--) {
				booksArr[i] = switchersArr[i].getElementsByClassName('book') || '';
			}

			if(switchersArr.length == 0 || booksArr.length == 0) return;

			for (let i = dotsBlock.length - 1; i >= 0; i--) {
				switcherStartTransform[i] = -parseInt(getComputedStyle(switchersArr[i]).width);
				switchersArr[i].setAttribute("data-startTransform", switcherStartTransform[i]);
				for (let j = 0; j <= booksArr[i].length - 1; j++) {
					let dotElem = document.createElement('i');

					dotElem.className = j == 1 ? "fa fa-circle books-switcher__dot books-switcher__dot_active" : "fa fa-circle books-switcher__dot";
					dotElem.setAttribute("aria-hidden", "true");
					//dotElem.addEventListener("click", switchBooks.bind(switchBooks, switchersArr[i], j), false);

					dotsBlock[i].appendChild(dotElem);
				}
			}

			switchersArr = Array.from(switchersArr);
			switchersArr.map(elem => {
				elem.addEventListener('touchmove', function(event) {
					event.stopPropagation();
					let directMove = event.changedTouches[0].clientX - touchStartPoint; // local switch coordinates, while touch is move

					let transformProp = Modernizr.prefixed('transform'), // prefix for transform at the different browser
						startTransform = parseInt(elem.getAttribute("data-startTransform")), // position with which the switch is start
						theta = 0;

			        theta = startTransform + directMove;

			        elem.style[ transformProp ] = 'translate(' + theta + 'px, 0) translateZ(0)';
			        elem.style.transition = 'transform 0s ease-out';
				}, false);

				elem.addEventListener('touchstart', function(event) {
					event.stopPropagation();
					touchStartPoint = event.changedTouches[0].clientX;
				}, false);

				elem.addEventListener('touchend', function(event) {
					event.stopPropagation();
					let transformProp = Modernizr.prefixed('transform'),
						stepSize = parseInt(getComputedStyle(elem).width), // step size of switch, when touch is end
						startTransform = parseInt(elem.getAttribute("data-startTransform")), // position with which the switch is start
						activeDot = elem.nextElementSibling.childNodes, // for dot mark active book
						touchEndPoint = event.changedTouches[0].clientX,
						theta = 0;

						for (let i = activeDot.length - 1; i >= 0; i--) {
							if(activeDot[i].className.search('books-switcher__dot_active') != -1) {
								activeDot[i].className = 'fa fa-circle books-switcher__dot';
							}
						}

						let directionTr = (touchStartPoint - touchEndPoint) > 0 ? -1 : 1; // calc the direction based on start and end touch position

						theta += startTransform + stepSize * directionTr; // summary calc of switch size based on current transform, step size and direction

						// if we reach the end or the start of switch position.
						// TODO change this mechanism on carusel.
						if(theta <= stepSize * elem.children.length * -1) { 
							theta = 0;
						}
						else if (theta > 0) {
							theta = stepSize * (elem.children.length - 1) * -1;
						}

						let dotC = (theta - stepSize) / -stepSize; // offset begin with -272 or -350 in different client width;

						activeDot[dotC-1].className += ' books-switcher__dot_active';

						elem.setAttribute("data-startTransform", theta);

					elem.style[ transformProp ] = 'translate(' + theta + 'px, 0) translateZ(0)';
					elem.style.transition = 'transform .4s ease-out';

				}, false);

			});
		}

		/*var switchBooks = (switcher, bookNum) => {
			let transformProp = Modernizr.prefixed('transform'),
				stepSize = parseInt(getComputedStyle(switcher).width),
				activeDot = switcher.nextElementSibling.childNodes,
				theta = 0;

	        theta += stepSize * bookNum * -1;
	        switcher.style[ transformProp ] = 'translate(' + theta + 'px, 0) translateZ(0)';
	        activeDot[bookNum].className = "fa fa-circle books-switcher__dot active-dot";
		}  */

		var displayMenu = (show) => {
			if(show) menu.className = "menu menu-open";
			else menu.className = "menu menu-close";
		}
	</script>
</body>
</html>