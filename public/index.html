<!DOCTYPE html>
<html>
<head>
	<title>Online Library</title>
	<meta content="width=device-width,maximum-scale=1.0,initial-scale=1.0,minimum-scale=1.0,user-scalable=yes" name="viewport">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="./css/index.css">
	<script type="text/javascript" src="./js/modernizr-custom.js"></script>
	<script type="text/javascript" src="./js/switch-book.js"></script>
</head>
<body>
	<div id="root"></div>
	<script type="text/javascript">
		window.onload = () => {
	    let switchersArr = document.getElementsByClassName('find-switcher') || []; // every block which contain books

	    initialSwitchState(1000); // from switch-book.js chose hideWidth;
	    createDots(switchersArr); // from switch-book.js create dots equile count of books in category;
	    hideSwitchOnWidth(switchersArr); // from switch-book.js create dots equile count of books in category;

	    switchersArr = Array.from(switchersArr); // htmlCollection into array;
	    switchersArr.map(elem => {
	      elem.addEventListener('touchmove', localSwitchBooks.bind(localSwitchBooks, elem) , false);
	      elem.addEventListener('touchstart', getStartSwitchPos.bind(getStartSwitchPos) , false);
	      elem.addEventListener('touchend', finishSwitchBooks.bind(finishSwitchBooks, elem) , false);
	    });

	    bookDescResize();
	  }

	  window.onresize = () => {
	    let switchersArr = document.getElementsByClassName('find-switcher') || [];
	      
	    hideSwitchOnWidth(switchersArr);
	    bookDescResize();
	  }

	  var bookDescResize = () => {
	    let bookDesc = document.getElementsByClassName('book__desc') || [];
	    
	    for (let i = bookDesc.length - 1; i >= 0; i--) {
	      let columnHeight = Math.ceil((bookDesc[i].clientWidth - bookDesc[i].offsetTop + 49) / 18);
	      bookDesc[i].style = '-webkit-line-clamp: ' + columnHeight;
	    }
	  }
	</script>
</body>
</html>